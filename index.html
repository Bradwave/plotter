<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matephis Plotter</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/styles.css?v=1.2">
    <!-- Matephis Plot Library -->
    <script src="js/matephis-plot.js?v=1.2"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <header>
                <h1>Matephis Plotter</h1>
                <p>Interactive Graphing Tool</p>
            </header>

            <div class="sidebar-scroll">
                <!-- Global Settings -->
                <div class="section-header-collapsible" data-target="global-settings">
                    <div class="section-title">Plot Settings</div>
                    <span class="material-symbols-outlined dropdown-icon">expand_more</span>
                </div>
                <div id="global-settings" class="collapsible-content">
                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Size</span>
                            <div class="inputs-compact">
                                <input type="number" id="g-width" placeholder="Auto" title="Width">
                                <span style="color: #aaa">Ã—</span>
                                <input type="number" id="g-height" placeholder="Auto" title="Height">
                            </div>
                        </div>
                    </div>

                    <div class="component-row">
                        <div class="control-row" style="margin-bottom: 8px;">
                            <span class="control-label">X Limit</span>
                            <div class="inputs-compact">
                                <input type="number" id="g-xmin" placeholder="-10" class="input-md">
                                <input type="number" id="g-xmax" placeholder="10" class="input-md">
                            </div>
                        </div>
                        <div class="control-row">
                            <span class="control-label">Y Limit</span>
                            <div class="inputs-compact">
                                <input type="number" id="g-ymin" placeholder="-10" class="input-md">
                                <input type="number" id="g-ymax" placeholder="10" class="input-md">
                            </div>
                        </div>
                    </div>

                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Aspect Ratio</span>
                            <input type="text" id="g-aspect" placeholder="1:1" class="input-md"
                                style="text-align:right;">
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label">Padding</span>
                            <input type="number" id="g-padding" placeholder="Auto" class="input-num">
                        </div>
                    </div>

                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Interactive</span>
                            <label class="toggle-switch"><input type="checkbox" id="g-interactive"><span
                                    class="slider"></span></label>
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label">Theme</span>
                            <select id="g-theme" class="input-lg">
                                <option value="default">Default</option>
                                <option value="red">Red</option>
                                <option value="black">Black</option>
                                <option value="sunburst">Sunburst</option>
                                <option value="coastal">Coastal</option>
                                <option value="seaside">Seaside</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Grid & Axis -->
                <div class="section-header-collapsible" data-target="grid-settings">
                    <div class="section-title">Grid & Axis</div>
                    <span class="material-symbols-outlined dropdown-icon">expand_more</span>
                </div>
                <div id="grid-settings" class="collapsible-content">
                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Show Grid</span>
                            <label class="toggle-switch"><input type="checkbox" id="g-grid"><span
                                    class="slider"></span></label>
                        </div>
                    </div>

                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">X Axis</span>
                            <div class="inputs-compact">
                                <label style="font-size:0.9em"><input type="checkbox" id="g-shownumbers-x">
                                    Numbers</label>
                                <label style="font-size:0.9em"><input type="checkbox" id="g-showticks-x"> Ticks</label>
                                <input type="number" id="g-xstep" placeholder="Step" class="input-md">
                            </div>
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label">Y Axis</span>
                            <div class="inputs-compact">
                                <label style="font-size:0.9em"><input type="checkbox" id="g-shownumbers-y">
                                    Numbers</label>
                                <label style="font-size:0.9em"><input type="checkbox" id="g-showticks-y"> Ticks</label>
                                <input type="number" id="g-ystep" placeholder="Step" class="input-md">
                            </div>
                        </div>
                    </div>

                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Labels</span>
                            <div class="inputs-compact">
                                <input type="text" id="g-xlabel" placeholder="X" class="input-sm">
                                <input type="text" id="g-ylabel" placeholder="Y" class="input-sm">
                            </div>
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label" style="font-size:0.9em">Axis Style</span>
                            <div class="inputs-compact">
                                <label style="font-size:0.9em"><input type="checkbox" id="g-axis-bold"> Bold</label>
                                <label style="font-size:0.9em"><input type="checkbox" id="g-axis-italic"> Italic</label>
                                <input type="number" id="g-axis-offset" placeholder="Offset" class="input-sm" style="width:50px !important" title="Label Offset">
                            </div>

                        </div>
                        <div class="control-row" style="margin-top:4px;">
                            <span class="control-label" style="font-size:0.9em">Data Style</span>
                            <div class="inputs-compact">
                                <label style="font-size:0.9em"><input type="checkbox" id="g-datalabel-bold"> Bold</label>
                                <label style="font-size:0.9em"><input type="checkbox" id="g-datalabel-italic"> Italic</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Legend -->
                <div class="section-header-collapsible" data-target="legend-settings">
                    <div class="section-title">Legend</div>
                    <span class="material-symbols-outlined dropdown-icon">expand_more</span>
                </div>
                <div id="legend-settings" class="collapsible-content">
                    <div class="component-row">
                        <div class="control-row">
                            <span class="control-label">Enabled</span>
                            <label class="toggle-switch"><input type="checkbox" id="g-legend"><span
                                    class="slider"></span></label>
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label">Position</span>
                            <select id="g-legendpos" class="input-md" style="text-align:right;">
                                <option value="top-right">TR</option>
                                <option value="top-left">TL</option>
                                <option value="bottom-right">BR</option>
                                <option value="bottom-left">BL</option>
                            </select>
                        </div>
                        <div class="control-row" style="margin-top:8px;">
                            <span class="control-label">Size</span>
                            <input type="number" id="g-legendsize" placeholder="Auto" style="width:70px">
                        </div>
                    </div>
                </div>

                <!-- Parameters -->
                <div class="section-header-collapsible" data-target="params-section">
                    <div class="section-title">Parameters</div>
                    <span class="material-symbols-outlined dropdown-icon">expand_more</span>
                </div>
                <div id="params-section" class="collapsible-content expanded">
                    <div id="params-list"></div>
                    <button class="secondary btn-full" id="add-param-btn" style="margin-top:8px;">+ Add
                        Parameter</button>
                </div>

                <!-- Data Items -->
                <div class="section-header-collapsible" data-target="items-section">
                    <div class="section-title">Data</div>
                    <span class="material-symbols-outlined dropdown-icon">expand_more</span>
                </div>
                <div id="items-section" class="collapsible-content expanded">
                    <div id="items-list"></div>
                    <!-- Add Item Buttons -->
                    <div class="add-item-bar" style="display:grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap:8px;">
                        <button onclick="addItem('fun')" title="Function"
                            style="flex-direction:column; gap:4px; padding:10px;">
                            <span class="material-symbols-outlined">show_chart</span>
                            <span style="font-size:0.65rem">Function</span>
                        </button>
                        <button onclick="addItem('implicit')" title="Implicit"
                            style="flex-direction:column; gap:4px; padding:10px;">
                            <span class="material-symbols-outlined">all_inclusive</span>
                            <span style="font-size:0.65rem">Implicit</span>
                        </button>
                        <button onclick="addItem('point')" title="Point"
                            style="flex-direction:column; gap:4px; padding:10px;">
                            <span class="material-symbols-outlined">adjust</span>
                            <span style="font-size:0.65rem">Point</span>
                        </button>
                        <button onclick="addItem('xline')" title="Vertical Line"
                            style="flex-direction:column; gap:4px; padding:10px;">
                            <span class="material-symbols-outlined rotate-90">line_end</span>
                            <span style="font-size:0.65rem">Vert. Line</span>
                        </button>
                    </div>
                </div>
                <div style="height:20px;"></div>
            </div>

            <!-- Fixed JSON Data -->
            <div id="json-section-wrapper" class="json-fixed-panel">
                <!-- Resizer Handle -->
                <div class="sidebar-resizer" id="json-resizer"></div>

                <div class="section-header-collapsible" id="json-collapse-header">
                    <div class="section-title">JSON Configuration</div>
                    <span class="material-symbols-outlined dropdown-icon" id="json-collapse-icon">expand_more</span>
                </div>

                <div id="json-section-body" style="display:flex; flex-direction:column; flex:1; overflow:hidden;">
                    <div class="json-toolbar">
                        <button id="update-from-json-btn" class="secondary" style="padding: 4px 8px; font-size:0.7rem;">
                            <span class="material-symbols-outlined" style="font-size:14px">sync</span> Update
                        </button>
                        <button id="copy-json-btn" class="secondary" style="padding: 4px 8px; font-size:0.7rem;">
                            <span class="material-symbols-outlined" style="font-size:14px">content_copy</span> Copy
                        </button>
                    </div>
                    <textarea id="json-editor"></textarea>
                </div>
            </div>

            <div class="sidebar-actions">
                <button id="clear-btn" class="btn-secondary" title="Clear All / Reset">
                    <span class="material-symbols-outlined">cleaning_services</span>
                </button>
                <button id="refresh-btn" class="btn-primary">
                    <span class="material-symbols-outlined">refresh</span> Refresh Plot
                </button>
            </div>

        </div>

        <!-- Main Plot Area -->
        <main class="canvas-wrapper">
            <div id="plot-target"></div> <!-- Replaced class="matephis-plot" with empty id to fix error -->
        </main>
    </div>

    <script src="js/main.js"></script>
</body>

</html>